# STATE_PANEL_SPEC.md — STATE_PANEL 稳定字段规范（内核协议）

> **用途**：让 `STATE_PANEL.md` 可被增量 patch、可被稳定检索、可长期运行不漂移。  
> **原则**：字段结构稳定；内容可变；避免重复段落与自由扩写。

---

## 1) 章节与顺序（必须固定）

`STATE_PANEL.md` 必须按以下一级标题顺序出现（可为空，但不可缺失）：

1. `## 时间`
2. `## 指标`
3. `## 任务`
4. `## NPC 关系`
5. `## 时钟`
6. `## 物品栏`
7. `## 关键线索`
8. `## 位置`

> 允许附加：`## 备注`（放在最后；可选）。

---

## 2) 表格字段（必须稳定）

### 2.1 时间
表头固定为：`| 日期 | 季节 | 特殊日期 |`

### 2.2 指标
表头固定为：`| Grace | Debt | Rumor | Heat |`

### 2.3 任务
表头固定为：`| ID | 任务 | 状态 |`
其中 ID 推荐使用 HUD 侧 `Q#`（如 `Q1`）或稳定 `quest_*`（二选一，但要长期一致）。

### 2.4 NPC 关系
表头固定为：`| 名字 | 状态 | 信任 |`

### 2.5 时钟
表头固定为：`| 时钟 | 进度 | 说明 |`
进度建议使用稳定符号（如 `⚪○○○○`）或 `X/Y`（二选一，但要长期一致）。

---

## 3) 维护约束（强制）

- **不重复**：`## 关键线索` 只能出现一次。
- **不膨胀**：物品栏建议 ≤ 12 行；线索建议 ≤ 12 条。
- **可 patch**：更新时只改动对应章节，不重写整文件。
- **可追溯**：每次重大变更应在最新 `sessions/session_*.md` 的 Decision 中留痕（通过 `ARCHIVE_DELTA` append）。

